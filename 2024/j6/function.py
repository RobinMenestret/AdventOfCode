input = """.........#...................................................................................................#.................#..
...........................#.......................................#..............................................................
.............#.................................................................................#............................#.....
...#.....................#.......#....................................#..............#.............................#...........#.#
..........#.....#..#.....#.............#..................#............#.....#........#.#.......#............................#....
...#...................#..........#...................#.........#..#..............##.......................................#......
..................................................................................................#...............................
...............#.........#....#.#..#.........#...........#...#....................#.........#.......#....#........................
..........................................#......#.#...................................................#.............#............
....................#............................#..........................................#.....................#.........#.....
..............#..................................#................#..#...........................................#................
.........#....###.......#........................................................................................#.#.....#...#..#.
.#....................................#.....................................#.................................#..................#
........................#...................................#.#....................#......##.#.........#..........................
............#.......#..................#..........................................................................................
....#.............#.#.....#...#.....#......................#...............#............##...#....................................
...#....#.....................................##........#........#....##.....................................#....................
...........................................................................#........#..........##................................#
..............................#.#......................#..........................#..#........#...............................#...
..............#.........###.......................................#...........#...............#......#.........#........#.....#...
............#............................#....................#........................#............#.............................
.........................................#.....................................................#.....#...............#............
.#...##.......................#.......#..........................................................................#...#...........#
....#..............#............#......#........................#.......................#...#.......................#.............
.......#...............#......#......#..........................................#..................#....................#...#.....
.......................................................................#.........#................................................
.#.......#........................................................##..............................................................
.........................#...................#..#......##..................................#......#......#........................
......................................#..............................................#......#..........#.#.........#..............
.....#..............#..#........#..............................#...##.............................................................
..##............................#.......................................................#..........#..............................
...........................................................##................................................#....................
#...............#.........#.....................................................#......................###........................
#.#.......................#........................#..#.....................#....#........#........................#...#.........#
............#.............#.#............#........................#..........#....................................................
............#...................#.....................................................................................#.......#...
.............................#...#..#...........................#...#.........................................................#...
........#.......................##..........................................................#.........#.....................#.....
............##............#..........................................................#.#.....#......#.#.......#...................
...........#.....#......#.................#.............#......................................#.....#...#........................
#............#.........#.......##.....#......#...........#...........#.......#................#...................................
......#..#...#.....#................................................#............#...#..........^.................................
............................................................................................................#....#................
......................................#.............................#........................#...............#.....#...#..........
...#.........................................................................#....................................................
.....................................#.........................................................#.............#.........#..........
#..............................#...#.................................#............................................................
..........#..................#............#.......#...........................#...................#.....#.........................
............................#...##.............................................................#............#.....................
.................#..................................................................#..#..............#...........................
..................#...............................#................#............#...........#......#............#.................
.....#......................#..............#.......................#......................#.......................................
...............................#.....#.......................#.......#......................#......#............#...........#.....
......#.............##....#.....#...............#.....#............................#....................................#.........
...#.#.......#..#...##.............................................................#.#.#...........#.....#................#.......
...........................................#...#......#...........................................................................
.........#.................................#........................................................................#........#.#..
........................#..........................................#.......#..............#.......................................
....................................................#...............#..........................#..................................
............................#................#......#...............#.....................#.......................................
#.#............#......................................................................................#.....#.....................
................................................................#....#..........................................#........#......#.
.......#........#......................................................................#.................#..................#.#...
...............................#...#......................................................................#.........#.........#...
...........#..#..................##..#.........................................#..............##............................#.....
#........#...............#.....#.....#.................#............#....#.............................#.......#.................#
...............#...................................................#.......#.......................#......#.............#.........
...#............................................................................................................................#.
#.....................#......................................................#...........................................#........
...........#..........................................#.......................................#.....................#.............
....#.##.......#..............#.....#..............................#....................................#.....................#...
...............................................................................................................#...............#..
.#...........................#...#.....#...#...................#....#........#.........#................................#.........
.................#............................................................................#........................#..#.......
.............#....#.....................................................#............#.........................#.......#..........
#....#........................#....................................................................##.............................
...#.#.....................................#...............................................#.....................#....#.........#.
.........#..............................#....................................#.................#............#.....................
................................................................#.................................................................
#.......#..............................................#.............................#...........#................................
.#......#.........#.............................#...............................................................#.................
.........#.....#......#.......................................................................................................#...
#..............................#........#............................#.................................#.....#.....#..............
......#.....................................#.......#........#....................................................................
#.......#.....................................#......................................................................#............
.....................................#......................................#......#.##..................#.....#.#................
.......................#.........#......#...........................................................................##............
.....#......#.#.................................................#.............................#............#.#.......#............
..................#.......................................#.#.............................#..................................#....
......................#.......#.....................#...................#......#.........................................#........
.........#...................................................................................................#....#...............
.........................#...........#..........#...............#.....#...................................................##......
#...#......#.#.....................#..................#.................#..................#......................................
..............................#.....#................#.....................#............#...#....#............#...#...............
.........................#..................#.............................................................................#.......
.......#....................#.......................#.....................#..........#...........#..........#...................#.
....#..........#..#................#.....#..........#........#..................#.....................##...............#.........#
.....................................................................................#......................................#.....
.......................................#...................................#.......................#..........................#...
.......#...............................#............#.....#..............................................#.................#......
.#..........................#..................................................................#...#.#.......#.#..........#.......
#...............................................................#.#............................#...............#......#...........
...#..........................#.#..#.#.............................................................#......#.......................
..................#........#.....................................................#...............................................#
....................#.............#.........#........##................#.............#............#..#............................
.........................#.................................#...........................................#.....#....................
..........................................##..........#................................#........................................#.
.................................................................................#..........#....................##........##.....
.....###......#.....#...................................................................................#..#...................#..
........#.....#.....#.....#..........#.................................................#.#......................#.................
...........................................#....#..............#..#..............#................................................
....#.............#...................................#.....#........................................................#............
.........#........#.............#..................#..........#..........................###.......#....#.#.#.....................
..................#....................#...................#...#..................................................................
.......#...............#................................................................................#................#........
....#..........................#......#....................................#.............#...#......................#...#.........
.#..#....................#.....................#.............#...............................#....................#....##.........
..#..#........#......#.................##..#.......#....................#.............................................#...........
..................#......#.............#.##.................................##.....................................#...#..........
.#...##........#........................................................................................#.....#...#....#..........
............#........................#............................................#.........#.............#.......................
................#......#........#...........................................................#............#........................
..............................#.#......#................................#...........#......................................#......
...................#...................#.............#............#.............#.................................................
.........#.......#....#........#.........#.....................#..#.......#..#...#.............................#..................
.........#...#.........................................................................#.....#.......#............................
.........................#..........#...............................................#.....................................#....#..
....#..................##..##...........#.........#..................................................#...#...........#...........#
.......#.......#.....#...............#.#.....#.............#........................#..............................#..#.........#.
........................#........................................#.............................##................................."""

def text2table(text):
    table=[[]]
    ligne = 0
    for i in range(len(text)):  
        
        if text[i] == "\n":
            table.append([])
            ligne +=1
        else :
            table[ligne].append(text[i])
    return table

def part1():
    number_of_pos = 1
    position = [] # [v,>]
    orient = 1 # 1:haut, 2:droite, 3:bas, 0:gauche
    map = text2table(input)
    for ligne in range(len(map)):
        for colonne in range(len(map[0])):
            if map[ligne][colonne] == "^":
                position.append([ligne, colonne])
                #print(position[-1])
    while position[-1][0] < len(map)-1 and position[-1][0] > 0 and position[-1][1] < len(map[0])-1 and position[-1][1] > 0 :

        if orient%4 == 1:
            theo_next = [position[-1][0]-1,position[-1][1]]
        elif orient%4 == 2:
            theo_next = [position[-1][0],position[-1][1]+1]
        elif orient%4 == 3:
            theo_next = [position[-1][0]+1,position[-1][1]]
        elif orient%4 == 0:
            theo_next = [position[-1][0],position[-1][1]-1]
        if map[theo_next[0]][theo_next[1]] == "#":
            #print("obstacle !")
            orient+=1
        else :
            if map[theo_next[0]][theo_next[1]] not in  ["X", "&"]:
                number_of_pos +=1
                map[theo_next[0]][theo_next[1]] = "X"
                theo_next.append(True)
            else :
                map[theo_next[0]][theo_next[1]] = "&"
                theo_next.append(False)
            position.append(theo_next)
        
    #print(number_of_pos)
    #print("\n".join(" ".join(sous_liste) for sous_liste in map))
    return position


def part2():
    number_of_obstacle = 0
    map = text2table(input)
    obstacles = part1()
    for obstacle in obstacles:

            position = [] # [v,>]
            orient = 1 # 1:haut, 2:droite, 3:bas, 0:gauche
            map = text2table(input)

            if  map[obstacle[0]][obstacle[1]] == ".":
                map[obstacle[0]][obstacle[1]] = "O"
            else :
                continue

            for ligne in range(len(map)):
                for colonne in range(len(map[0])):
                    if map[ligne][colonne] == "^":
                        position.append([ligne, colonne, orient])

            while position[-1][0] < len(map)-1 and position[-1][0] > 0 and position[-1][1] < len(map[0])-1 and position[-1][1] > 0 :
                orient = orient%4
                if orient%4 == 1:
                    theo_next = [position[-1][0]-1,position[-1][1]]
                elif orient%4 == 2:
                    theo_next = [position[-1][0],position[-1][1]+1]
                elif orient%4 == 3:
                    theo_next = [position[-1][0]+1,position[-1][1]]
                elif orient%4 == 0:
                    theo_next = [position[-1][0],position[-1][1]-1]
                if map[theo_next[0]][theo_next[1]] in ["#", "O"]:
                    orient+=1
                
                else :
                    theo_next.append(orient)
                    if theo_next in position :
                        number_of_obstacle +=1
                        print("boucle !")
                        break
                    position.append(theo_next)
                    map[theo_next[0]][theo_next[1]] = "X"
                    
            print(number_of_obstacle)           

